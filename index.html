<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=2.0">
    <link rel="icon" type="image/x-icon" href="./styles/icon.png">
    <link rel="stylesheet" href="./styles/style.css">
    <link rel="stylesheet" href="./styles/reactive.css">
    <link rel="stylesheet" href="./fonts/stylesheet.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.js"></script>
    <script src="https://unpkg.com/twemoji@latest/dist/twemoji.min.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.0/color-thief.umd.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.1.2/chroma.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">

<style>
    .noselect {
  -webkit-touch-callout: none; /* iOS Safari */
    -webkit-user-select: none; /* Safari */
     -khtml-user-select: none; /* Konqueror HTML */
       -moz-user-select: none; /* Old versions of Firefox */
        -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently
                                  supported by Chrome, Edge, Opera and Firefox */
}

.disabledrag {
   -webkit-user-drag: none;
  -khtml-user-drag: none;
  -moz-user-drag: none;
  -o-user-drag: none;
   -user-drag: none;
}

/* width */
::-webkit-scrollbar {
  width: 0px;
  height: 0px;
}

/* Track */
::-webkit-scrollbar-track {
  background: red;
}
 
/* Handle */
::-webkit-scrollbar-thumb {
  background: green; 
}

/* Handle on hover */
::-webkit-scrollbar-thumb:hover {
  background: yellow; 
}

.clickable {display: block;}

    .color-box {
      width: 100px;
      height: 100px;
      margin: 10px;
      border-radius: 10px;
    }
    
 @media (prefers-color-scheme: light) {
  #preloader {
    background-color: #FFF;
  }
}
@media (prefers-color-scheme: dark) {
  #preloader {
    background-color: #333;
  }
}
</style>
</head>
<body id="body" class="light noselect">
  
<div id="preloader"></div>

<div id="main">

  <div id="tabs"></div>

    <div id="topbar"> 
      <div id="topbar_left">
        <div style="margin-bottom: 0px;margin-top:-6px;font-weight: bold;font-size: 32px;" id="userTitle"></div>
          <div id="status">
            <div id="status_text_block">
              <div id="status_arrow"></div>
              <div id="status_text">loading...</div>
            </div>
          </div>
        <div id='clock'>fetching...</div>
        <div id="version" style="font-size: 10px;font-weight: bold;">v.1.2</div>
      </div>

      <div id="music">
        <a id="music-track-link" target="_blank">
          <img id="music-cover" class="music-cover"></img>
        </a>
        <img id="music-cover-nolink" class="music-cover"></img>

        <div id="music-content">
          <div id="music-song"></div>
          <div id="music-artist"></div>
            <div id="music-elapsed-time-wrapper"></div>
            <div id="music-progress-bar-wrapper"></div>
        </div>
      </div>

      <div id="profile">
        <img class="disabledrag" id="pfp" src="./styles/blank.png"/>

        <div id="profile_hover">
          <div id="profile_arrow"></div>

            <div id="profile_inner">
              <a id="pfp_link"></a>
                <div id="accounts"></div>
                <div style="height: 1px;width: 100%;background-color: var(--text);margin: 5px;margin-left: 0px;"></div>
          
              <div id="settings">
                <span>
                  <i class="fa-solid fa-clock-rotate-left icon-style" style="margin-right: -3px;"></i>
                  <span style="border-bottom: 2px solid var(--text);">time format:</span> 
                  <span style="cursor: pointer;display: block;margin-top: 4px;" id="timeFormatBtn"></span>
                </span>

                <span>
                  <i class="fa-solid fa-text-height icon-style" style="margin-right: -3px;"></i>
                  <span style="border-bottom: 2px solid var(--text);">font style:</span> 
                  <div class="dyslexic-off fontChange">default</div>
                  <div class="dyslexic-on fontChange">dyslexic</div>
                </span>

                <span>
                  <i class="fa-solid fa-pencil icon-style" style="margin-right: -3px;"></i>
                  <span style="border-bottom: 2px solid var(--text);">override theme:</span> 
                  <div id="theme-toggle" class="fontChange"></div>
                </span>

                <span>
                  <i class="fa-solid fa-bug icon-style" style="margin-right: -3px;"></i>
                  <span style="border-bottom: 2px solid var(--text);">broken?</span>
                  <div id="reset">reset</div>
                </span>

                <span style="display: none;">
                  <div style="height: 1px;width: 100%;background-color: var(--text);margin: 5px;margin-left: 0px;"></div>
                <span style="color:lightcoral;display:block;">EXPERIMENTAL</span> 
              </span>
            </div>
          </div>
      </div>
    </div>
  </div>

<!-- add your tabs here -->

  <div class="bar" id="text_outer">
    <div class="noselect bar_inner" id="text"></div>
  </div>

  <div class="bar" id="people">
    <div class="noselect bar_outer" id="friends_outer">
      <div class="noselect bar_inner" id="friends_inner"></div>
    </div>
  </div>

  <div class="bar" id="projects">
    <div class="noselect bar_inner" id="project_inner"></div>
  </div>


<!-- add your tabs here -->

</div>

<!-- <script>
// Wait for the DOM to fully load before running the JavaScript code
window.onload = function() {
    // Get the #tabs element's width
    const tabsElement = document.getElementById('tabs');
    const tabsWidth = tabsElement.offsetWidth + 52;

    // Create a style element and append it to the document head
    const style = document.createElement('style');
    document.head.appendChild(style);

    console.log(tabsWidth);

    // Define the media query string based on the tabsWidth
    const mediaQuery = `@media screen and (max-width: ${tabsWidth}px) {
    #main {
        margin-top: -27px;
        height: calc(100% - 100px);
    }

    #tabs {
        bottom: 0;
        z-index: 0;
    }

    #pfp {
        margin-top: 25px;
        background-color: var(--color1);
        height: 50px;
        width: 50px;
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
        border-top-left-radius: 0px;
        border-top-right-radius: 0px;
    }
    #profile {
        bottom: 0;
        position: fixed;
        height: 30px;
        padding: 5px;
        margin-right: 0px;
        border-radius: 8px;
    }
    #profile_hover {
        position: fixed;
        bottom: 10px;
        right: 65px;
        margin-right: -55px;
        border-bottom-right-radius: 0px;
        border-bottom-left-radius: 0px;
    }
    #profile_arrow {
        display: none;
    }
    #profile_inner {
        margin-top: -5px !important;
    }
    .tabs_style {
        margin-top: 40px !important;
        border-bottom-left-radius: 8px;
        border-top-left-radius: 0px;
    }
    .tabs_style:last-child {
        border-bottom-right-radius: 8px;
        border-top-right-radius: 0px;
    }

    .bar, .bar_inner {
        border-bottom-right-radius: 0px !important;
    }

    #friends_inner {
        display: block;
        overflow-y: scroll;
        height: calc(100% - 10px)
    }

    #friends_container {
        width: 100% !important;
        margin-right: 0px !important;
        margin-bottom: 5px;
    }
    #friends_container:last-child {
        margin-bottom: 0px;
    }
    #friends_avatar {
        width: calc(100% - 20px);
        height: 100%;
    }
    #friends_name  {
        width: 100%;
        max-width: calc(100% - 20px);
    }
    .project-div:last-child {
        border-bottom-right-radius: 0px;
    }

    .bar {
        height: calc(100% - 115px);
    }
    }`;

    // Add the media query to the style element
    style.textContent = mediaQuery;
}; -->

</script>

<script>
  // use button id to reset localstorage or anything saved in the browser and reload the page
  document.getElementById('reset').addEventListener('click', function () {
  // Clear localStorage
  localStorage.clear();
  // Clear sessionStorage
  sessionStorage.clear();
  // Reload the page
  location.reload();
  });
</script>

<script>
  // Get references to the profile elements
  const profile = document.getElementById('profile');
  const pfp = document.getElementById('pfp');
  const profileHover = document.getElementById('profile_hover');

  // Function to toggle the visibility of the profile_hover div
  function toggleProfileHover() {
    if (profileHover.style.display === 'block') {
      profileHover.style.display = 'none';
    } else {
      profileHover.style.display = 'block';
    }
  }

  // Event listener to show or hide profile_hover when clicking on pfp
  pfp.addEventListener('click', function (event) {
    event.stopPropagation(); // Prevent event bubbling to the document click listener
    toggleProfileHover();
  });

  // Event listener to hide profile_hover when clicking outside the profile or profile_hover
  document.addEventListener('click', function (event) {
    const target = event.target;
    if (target !== profile && target !== profileHover && !profile.contains(target)) {
      hideProfileHover();
    }
  });

  // Function to hide the profile_hover div
  function hideProfileHover() {
    profileHover.style.display = 'none';
  }

  // Function to show the profile_hover div
  function showProfileHover() {
    profileHover.style.display = 'block';
  }
</script>

      
<script>
  var containers = document.querySelectorAll('#friends_inner, #tabs');
  var scrollAmounts = {};
  var isScrolling = false;
  var isEnabled = true; // Initially enabled

  function enableScroll() {
    isEnabled = true;
  }

  function disableScroll() {
    isEnabled = false;
  }

  function handleScroll(container, event) {
    if (!isEnabled) {
      return;
    }

    event.preventDefault();
    scrollAmounts[container.id] += event.deltaY;

    if (!isScrolling) {
      requestAnimationFrame(function () {
        scrollContainer(container);
      });
      isScrolling = true;
    }
  }

  function scrollContainer(container) {
    if (!isEnabled) {
      isScrolling = false;
      return;
    }

    container.scrollLeft += scrollAmounts[container.id] * 0.1; // Adjust the scroll speed as desired

    scrollAmounts[container.id] *= 0.9; // Adjust the damping factor as desired

    if (Math.abs(scrollAmounts[container.id]) < 0.1) {
      isScrolling = false;
      return;
    }

    requestAnimationFrame(function () {
      scrollContainer(container);
    });
  }

  // Function to check viewport width and enable/disable scroll based on the width
  function checkViewportWidth() {
    if (window.innerWidth < 480) {
      disableScroll();
    } else {
      enableScroll();
    }
  }

  // Initial check when the script is loaded
  checkViewportWidth();

  // Add a listener to continuously monitor the viewport width and adjust the behavior
  window.addEventListener('resize', checkViewportWidth);

  // Add the scroll event listener to each container
  containers.forEach(function (container) {
    scrollAmounts[container.id] = 0;

    container.addEventListener('wheel', function (event) {
      handleScroll(container, event);
    });
  });
</script>



<script src="./config.js"></script>
<script src="./code/tabs.js"></script>
<script src="./code/similarColor.js"></script>
<script src="./code/text.js"></script>
<script src="./code/fontchange.js"></script>
<script src="./code/apis/accounts.js"></script>
<script src="./code/apis/todolist.js"></script>
<script src="./code/apis/friends.js"></script>
<script src="./code/apis/discord.js"></script>
<script src="./code/apis/pronounspage.js"></script>
<script src="./code/apis/github.js"></script>
<script src="./code/time.js"></script>
</body>
</html>